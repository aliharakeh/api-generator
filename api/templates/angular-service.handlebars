import { Injectable } from '@angular/core';
import { HttpParams } from '@angular/common/http';
import { HttpOptions, APIs, ResponseWrapper } from '../models/_api';
import { {{importedItems}} } from '../models/{{importsPath}}';

@Injectable({
    providedIn: 'root'
})
export class APIService {

    constructor(private http: HttpClient) {}

    {{#each apis}}
    {{> (lookup . "method") }}

    {{/each}}
}

{{#*inline "get"}}
{{name}}(params?: {{name}}['params'], options?: HttpOptions): Observable<{{{responseType}}}> {
    params = new HttpParams({ fromObject: params || {} });
    return this.http.get({{baseUrl}} + '/{{endpoint}}', { params, ...config });
}
{{/inline}}


{{#*inline "post"}}
{{name}}(data: {{name}}['data'], params?: {{name}}['params'], options?: HttpOptions): Observable<{{{responseType}}}> {
    params = new HttpParams({ fromObject: params || {} });
    return this.http.post({{baseUrl}} + '/{{endpoint}}', data, { params, ...config });
}
{{/inline}}
