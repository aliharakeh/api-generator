import { Injectable } from '@angular/core';
import { HttpParams, HttpClient } from '@angular/common/http';
import { HttpOptions, APIs, ApiResponse } from '../models/_api';
import { {{importedItems}} } from '../endpoints/{{importsPath}}';
{{#each importsMap}}
import { {{0}} } from '{{1}}';
{{/each}}

@Injectable({
    providedIn: 'root'
})
export class {{serviceName}} {

    constructor(private http: HttpClient) {}

    {{#each apis}}
    {{> (lookup . "method") }}

    {{/each}}
}

{{#*inline "get"}}
{{name}}(params?: {{name}}['params'], options?: HttpOptions): Observable<{{{responseType}}}> {
    params = new HttpParams({ fromObject: params || {} });
    return this.http.get({{baseUrl}} + '/{{endpoint}}', { params, ...options });
}
{{/inline}}


{{#*inline "post"}}
{{name}}(data: {{name}}['data'], params?: {{name}}['params'], options?: HttpOptions): Observable<{{{responseType}}}> {
    params = new HttpParams({ fromObject: params || {} });
    return this.http.post({{baseUrl}} + '/{{endpoint}}', data, { params, ...options });
}
{{/inline}}
